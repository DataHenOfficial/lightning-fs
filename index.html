<body>
<script type="module">
  import { WebSocketBackend } from './src/WebSocketBackend.js'

  const port = 8542
  let ws = new WebSocketBackend(`ws://localhost:${port}`)
  ;(async () => {
    let result = await ws.readdir('/Users/wmhilton/code/isomorphic-git/lightning-fs')
    console.log(result)
    window.fs = ws
    try {
      await ws.rmdir('/Users/wmhilton/code/isomorphic-git/lightning-fs/foo/bar/jack/bean')
      console.log('rmdir success')
    } catch (e) {
      console.log('caught')
      console.log(e)
    }
  })()
  console.log(ws)
  // ws.addEventListener('open', () => {
  //   ws.send(JSON.stringify(['hi', 'there']));
  // })
</script>